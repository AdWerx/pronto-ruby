#!/usr/bin/env ruby

require 'pronto'
require 'pronto/cli'
$LOAD_PATH.push(__dir__)
require 'src/github_action_check_run_formatter'

runners_index = ARGV.index('-r') + 1
# github passes args quoted like:
# pronto "run" "-r" "rubocop yamllint"
# and this fails parsing by thor
# `require': cannot load such file -- pronto/rubocop rails_schema (LoadError)
ARGV.insert(runners_index, ARGV.delete_at(runners_index).split(' '))

Dir.chdir(ENV.fetch('GITHUB_WORKSPACE')) do
  Pronto::CLI.start
end
